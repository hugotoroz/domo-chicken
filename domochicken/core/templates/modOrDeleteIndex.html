{% extends "base/base.html" %}
{% load static %}
{% block css %}
<link rel="stylesheet" href="../static/css/style.css">
<link rel="stylesheet" href="../static/css/modproducto.css">
{% endblock %}
{% block title %}Domo Chicken - La mejor calidad{% endblock %}
{% block template %}
<!-- MODAL PARA DESACTIVAR PRODUCTO-->
<div class="curved-div upper" class="centrarT">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
        <path fill="#fff" fill-opacity="1"
            d="M0,160L48,176C96,192,192,224,288,224C384,224,480,192,576,181.3C672,171,768,181,864,197.3C960,213,1056,235,1152,234.7C1248,235,1344,213,1392,202.7L1440,
            192L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path>
    </svg>
</div>
<div id="myModal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Contenido de la modal -->
            <div class="modal-header">
                <h5 class="modal-title">Desactivar producto</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Estas seguro de que quieres desactivar a este producto?</p>
            </div>
            <div class="modal-footer">
                <span id="grupo-id"></span>
                <button type="button" class="btn btn-secondary close" data-dismiss="modal">Cerrar</button>
                <a href="#" class="btn btn-danger" id="btn-salir">Salir</a>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <h1 class="titulo">Modificar productos</h1>
    <div class="row">
        {% for x in producto %}
        <div class="col-xxl-4 col-xl-4 col-lg-4 col-sm-6 col-6">
            <div class="card mb-3" style="max-width: 450px;">
                <div class="row g-0">
                    {% if x.imagenProd %}
                    <div class="col-md-4">
                        <img src="{{x.imagenProd.url}}" alt="Error :D" id="img2" class="img-fluid">
                    </div>
                    {% else %}
                    <div class="col-md-4">
                        <img src="../media/Not_found.png" alt="Error :D" id="img2" class="img-fluid">
                    </div>
                    {% endif %}
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">{{x.nombre_producto}} </h5>
                            <p class="card-text text-truncate">
                                {{x.descripcion}}
                            </p>
                            <p class="card-text"><small class="fw-bold"> Precio: ${{x.precio}}</small></p>
                        </div>
                    </div>
                    <a href="{% url 'modificarProducto' x.id_producto%}" class="btn btn-primary my-btn">Modificar</a>
                    {% if x.prod_is_active == 1 %}
                    <button href="" data-prod_is_active="{{x.id_producto}}" type="button"
                        class="btn btn-primary my-btn btn-danger btn-abrir-modal">
                        Desactivar
                    </button>
                    {% endif %}
                    {% if x.prod_is_active == 0 %}
                    <button href="" data-prod_is_active="{{x.id_producto}}" type="button"
                        class="btn btn-success my-btn btn-abrir-modal-activar">
                        Activar
                    </button>
                    {% endif %}
                    {% if x.row_status == 1 %}
                    <button href="" data-row_status="{{x.id_producto}}" type="button"
                        class="btn btn-primary my-btn btn-danger btn-abrir-modal-eliminar">
                        Eliminar
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="row">
        <div class="col">
            <a href="{% url 'agregarProd' %}" class="btn btn-primary">Agregar</a>
            <a href="{% url 'stock_productos' %}" class="btn btn-primary">Stock</a>
        </div>
    </div>
</div>
<!-- MODAL PARA DESACTIVAR USUARIO-->
<div id="modalDesactivar" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Contenido de la modal -->
            <div class="modal-header">
                <h5 class="modal-title">Desactivar producto</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Estas seguro de que quieres desactivar este producto?</p>
            </div>
            <div class="modal-footer">
                <span id="grupo-id"></span>
                <button type="button" class="btn btn-secondary close" data-dismiss="modal">Cerrar</button>
                <a href="#" class="btn btn-danger" id="btn-desactivar">Aceptar</a>
            </div>
        </div>
    </div>
</div>
<!-- MODAL PARA ACTIVAR PRODUCTO-->
<div id="modalActivar" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Contenido de la modal -->
            <div class="modal-header">
                <h5 class="modal-title">Activar producto</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Estas seguro de que quieres activar este producto?</p>
            </div>
            <div class="modal-footer">
                <span id="grupo-id"></span>
                <button type="button" class="btn btn-secondary close" data-dismiss="modal">Cerrar</button>
                <a href="#" class="btn btn-danger" id="btn-activar-prod">Aceptar</a>
            </div>
        </div>
    </div>
</div>
<!-- MODAL PARA ELIMINAR PRODUCTO-->
<div id="modalEliminarProd" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Contenido de la modal -->
            <div class="modal-header">
                <h5 class="modal-title">Eliminar producto</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Estas seguro de que quieres eliminar a este producto?</p>
            </div>
            <div class="modal-footer">
                <span id="grupo-id"></span>
                <button type="button" class="btn btn-secondary close" data-dismiss="modal">Cerrar</button>
                <a href="#" class="btn btn-danger" id="btn-eliminar-prod">Aceptar</a>
            </div>
        </div>
    </div>
</div>
<div class="curved-div">
    <svg viewBox="0 0 1440 319">
        <path fill="#fff" fill-opacity="1"
            d="M0,32L48,80C96,128,192,224,288,224C384,224,480,128,576,90.7C672,53,768,75,864,96C960,117,1056,139,1152,149.3C1248,160,1344,160,1392,160L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
        </path>
    </svg>
</div>
<script>
    $(document).ready(function () {

        //MODAL DE DESACTIVAR
        $(".btn-abrir-modal").click(function () {
            // Mostrar la modal correspondiente al botón de eliminar
            $("#modalDesactivar").modal("show");
        });
        $(".btn-abrir-modal").click(function () {
            var prod_is_active = $(this).data("prod_is_active");
            var desactivar = "/desactivar_producto/" + prod_is_active + "/";
            $("#btn-desactivar").attr("href", desactivar);
        });
        $(".close").click(function () {
            // Mostrar la modal correspondiente al botón de eliminar
            $("#modalDesactivar").modal("hide");
        });


        //MODAL DE ACTIVAR
        $(".btn-abrir-modal-activar").click(function () {
            // Mostrar la modal correspondiente al botón de eliminar
            $("#modalActivar").modal("show");
        });
        $(".btn-abrir-modal-activar").click(function () {
            var prod_is_active = $(this).data("prod_is_active");
            var activar = "/activar_producto/" + prod_is_active + "/";
            $("#btn-activar-prod").attr("href", activar);
        });
        $(".close").click(function () {
            // Mostrar la modal correspondiente al botón de eliminar
            $("#modalActivar").modal("hide");
        });
        //MODAL DE ELIMINAR
        $(".btn-abrir-modal-eliminar").click(function () {
            // Mostrar la modal correspondiente al botón de eliminar
            $("#modalEliminarProd").modal("show");
        });
        $(".btn-abrir-modal-eliminar").click(function () {
            var row_status = $(this).data("row_status");
            var eliminar = "/eliminarProducto/" + row_status + "/";
            $("#btn-eliminar-prod").attr("href", eliminar);
        });
        $(".close").click(function () {
            // Mostrar la modal correspondiente al botón de eliminar
            $("#modalEliminarProd").modal("hide");
        });
    });
</script>
{% endblock %}